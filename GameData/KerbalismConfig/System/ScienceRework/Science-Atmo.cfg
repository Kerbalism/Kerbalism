//==============================================================================
// CURVE
//==============================================================================

@KERBALISM_EXPERIMENT_VALUES:NEEDS[FeatureScience]
{
  curve										//Flying High, 1 Hour, no biomes.
  {
    ECCost = 1.18
    size = 1627
    duration = 1892							// 30-ish min
    CrewRequirement = Pilot:1
  }
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = kerbalism_CURVE
	title = #kerbalism-experiment-curve-title
  baseValue = 21

  KERBALISM_EXPERIMENT
	{
    Situation = FlyingHigh
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_CURVE]]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
	dataScale = #$@KERBALISM_EXPERIMENT_VALUES/curve/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[kerbalism-experiment-curve]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
  @MODULE[Experiment]
  {
    data_rate = #$@KERBALISM_EXPERIMENT_VALUES/curve/size$
    @data_rate /= #$@KERBALISM_EXPERIMENT_VALUES/curve/duration$
    ec_rate = #$@KERBALISM_EXPERIMENT_VALUES/curve/ECCost$
    CrewRequirement = #$@KERBALISM_EXPERIMENT_VALUES/curve/CrewRequirement$
  }
}

//==============================================================================
// WING
//==============================================================================

@KERBALISM_EXPERIMENT_VALUES:NEEDS[FeatureScience]
{
  wing
	{
		ECCost = 0.8
		size = 38
		duration = 400
	}
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = kerbalism_WING
	title = #kerbalism-experiment-wing-title
  baseValue = 11

  KERBALISM_EXPERIMENT
	{
    Situation = FlyingLow@Biomes
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_WING]]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
	dataScale = #$@KERBALISM_EXPERIMENT_VALUES/wing/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[kerbalism-experiment-wing]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
  @MODULE[Experiment]
  {
    data_rate = #$@KERBALISM_EXPERIMENT_VALUES/wing/size$
    @data_rate /= #$@KERBALISM_EXPERIMENT_VALUES/wing/duration$
    ec_rate = #$@KERBALISM_EXPERIMENT_VALUES/wing/ECCost$
  }
}

//==============================================================================
// CLOUD
//==============================================================================

@KERBALISM_EXPERIMENT_VALUES:NEEDS[FeatureScience]
{
  cloud
	{
    ECCost = 1.5
    size = 55
    duration = 510
    CrewRequirement = Pilot:2
	}
}

EXPERIMENT_DEFINITION:NEEDS[FeatureScience]
{
	id = kerbalism_CLOUD
	title = #kerbalism-experiment-cloud-title
  baseValue = 20

  KERBALISM_EXPERIMENT
	{
    Situation = FlyingHigh@Biomes
    Situation = FlyingLow
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_CLOUD]]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
	dataScale = #$@KERBALISM_EXPERIMENT_VALUES/cloud/size$
	@dataScale /= #$baseValue$
  scienceCap = #$baseValue$
}

@PART[kerbalism-experiment-cloud]:NEEDS[FeatureScience]:AFTER[KerbalismDefault]
{
  @MODULE[Experiment]
  {
    data_rate = #$@KERBALISM_EXPERIMENT_VALUES/cloud/size$
    @data_rate /= #$@KERBALISM_EXPERIMENT_VALUES/cloud/duration$
    ec_rate = #$@KERBALISM_EXPERIMENT_VALUES/cloud/ECCost$
    CrewRequirement = #$@KERBALISM_EXPERIMENT_VALUES/cloud/CrewRequirement$
  }
}

// Atmo experiments should be reasonably short, as they require manual piloting (can't do them in the background)
//
//@KERBALISM_GROUP_SETTINGS:NEEDS[FeatureScience]
//{
//	SpectroVariometer							// other parameters are configured by StockExperiments.cfg
//	{
//		SetupMass = 0.2 						// stock mass of Spectro-Variometer
//		SetupCost = 6500						// stock cost of Spectro-Variometer
//		UnlockTech = scienceTech				// same tech as stock Spectro-Variometer
//		CrewRequirement =
//	}
//
//	PresMatBarometer							// other parameters are configured by StockExperiments.cfg
//	{
//		SetupMass = 0.005						// stock mass of Spectro-Variometer
//		SetupCost = 880							// stock cost of Spectro-Variometer
//		UnlockTech = survivability				// same tech as stock Spectro-Variometer
//		CrewRequirement =
//	}
