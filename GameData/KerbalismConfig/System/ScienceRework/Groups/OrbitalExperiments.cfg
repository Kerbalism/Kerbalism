
// ============================================================================
// The experiments were just added above, but not configured. This section takes care of that
// ============================================================================

@PART[*]:HAS[@MODULE[Experiment]:HAS[#experiment_id[kerbalism_BEEP]]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
{
	@MODULE[Experiment]:HAS[#experiment_id[kerbalism_BEEP]]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/BEEP/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/BEEP/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/BEEP/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/BEEP/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/BEEP/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/BEEP/ResourceRates$
	}
}

@PART[*]:HAS[@MODULE[Experiment]:HAS[#experiment_id[kerbalism_DING]]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
	@MODULE[Experiment]:HAS[#experiment_id[kerbalism_DING]]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/DING/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/DING/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/DING/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/DING/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/DING/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/DING/ResourceRates$
		%allow_shrouded = False
	}
}

@PART[*]:HAS[@MODULE[Experiment]:HAS[#experiment_id[kerbalism_TICK]]]:NEEDS[FeatureScience]:FOR[KerbalismDefault]
	@MODULE[Experiment]:HAS[#experiment_id[kerbalism_TICK]]
	{
		%ec_rate = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/TICK/ECCost$
		%crew_operate = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/TICK/CrewRequirement$
		%requires = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/TICK/requirements$
		%data_rate = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/TICK/size$
		@data_rate /= #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/TICK/duration$
		%resources = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/TICK/ResourceRates$
		%allow_shrouded = False
	}
}

// ============================================================================
// Patching the Experiment Definitions, according to the values in KERBALISM_GROUP_SETTINGS
// ============================================================================

@EXPERIMENT_DEFINITION:HAS[#id[KerbalismResourceScanner]]:NEEDS[FeatureScience]:FOR[zzzKerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/ResourceScanner/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/ResourceScanner/size$
	@dataScale /= #$baseValue$
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_BEEP]]:NEEDS[FeatureScience]:FOR[zzzKerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/BEEP/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/BEEP/size$
	@dataScale /= #$baseValue$
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_DING]]:NEEDS[FeatureScience]:FOR[zzzKerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/DING/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/DING/size$
	@dataScale /= #$baseValue$
}

@EXPERIMENT_DEFINITION:HAS[#id[kerbalism_TICK]]:NEEDS[FeatureScience]:FOR[zzzKerbalismDefault]
{
	@baseValue = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/TICK/value$
	@dataScale = #$@KERBALISM_GROUP_SETTINGS/ORBITAL_EXPERIMENTS/TICK/size$
	@dataScale /= #$baseValue$
}
