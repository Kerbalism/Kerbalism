// =============================================================================
// Replace stock lab with our own
// =============================================================================
@PART[*]:HAS[@MODULE[ModuleScienceLab]]:NEEDS[KerbalismScience]:FOR[Kerbalism]
{
	!MODULE[ModuleScienceLab] {}
	!MODULE[ModuleScienceConverter] {}

	MODULE
	{
		name = Laboratory
		researcher = Scientist
		analysis_rate = 0.005
		ec_rate = 1.0
	}
}

// =============================================================================
// The MPL gets a selection of exclusive experiments
// =============================================================================

@PART[Large_Crewed_Lab]:NEEDS[KerbalismScience]:FOR[Kerbalism]
{
  // micro gravity research
  // generic space observation

  MODULE
  {
    name = ModuleKsmExperiment
    id = kerbalism_STAKE
    hide_when_invalid = True
  }

  MODULE
  {
    name = ModuleKsmExperiment
    id = kerbalism_BIRDIE
    hide_when_invalid = True
  }

  MODULE
  {
    name = ModuleKsmExperiment
    id = kerbalism_TRAPPED
    hide_when_invalid = True
  }

  MODULE
  {
    name = ModuleKsmExperiment
    id = kerbalism_CHILLED
    hide_when_invalid = True
  }
}

// =============================================================================
// Lab module satisfies stock contracts
// =============================================================================
@Contracts:NEEDS[KerbalismScience]
{
	@Base
	{
		@PART_REQUEST:HAS[#Module[ModuleScienceLab]] { @Module = Laboratory }
	}
	@Station
	{
		@PART_REQUEST:HAS[#Module[ModuleScienceLab]] { @Module = Laboratory }
	}
}
