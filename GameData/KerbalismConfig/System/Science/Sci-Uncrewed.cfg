// =============================================================================
// DING
// =============================================================================

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_DING
	title = #kerbalism-experiment-ding-title

  KERBALISM_EXPERIMENT
	{
    Description = #kerbalism-experiment-ding-desc
		DataSize = 672862
		SciencePoints = 30

		MODULE_DEFINITION
		{
			Duration = 4y200d
			RequiredEC = 2.69
		}

    Situation = InSpaceHigh
    BodyNotAllowed = Suns
	}
}

// =============================================================================
// BEEP
// =============================================================================

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_BEEP
	title = #kerbalism-experiment-beep-title

  KERBALISM_EXPERIMENT
	{
    Description = #kerbalism-experiment-beep-desc
		DataSize = 4572
		SciencePoints = 33

		MODULE_DEFINITION
		{
			Duration = 1y120d
			RequiredEC = 1.92
		}

    Situation = InSpaceLow@Biomes
	}
}

// =============================================================================
// TICK
// =============================================================================

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_TICK
	title = #kerbalism-experiment-tick-title

  KERBALISM_EXPERIMENT
	{
    Description = #kerbalism-experiment-tick-desc
		DataSize = 204060
		SciencePoints = 160

		MODULE_DEFINITION
		{
			Duration = 5y
			RequiredEC = 0.88
		}

    Situation = InSpaceLow
    Situation = InSpaceHigh
    BodyAllowed = Suns
	}
}

// =============================================================================
// Resource Scanner
// =============================================================================

EXPERIMENT_DEFINITION:NEEDS[KerbalismScience]
{
	id = kerbalism_ResourceScanner
	title = #kerbalism-experiment-resourceScanner-title

	KERBALISM_EXPERIMENT
	{
    Description = #kerbalism-experiment-resourceScanner-desc
		DataSize = 2000
		SciencePoints = 8

		MODULE_DEFINITION
		{
			Duration = 20d
			RequiredEC = 0.5
      Requirements = OrbitMinInclination:80,OrbitMaxInclination:100,AltitudeBodyRadiusMin:3,AltitudeBodyRadiusMax:4
		}

  	UnlockResourceSurvey = true
  	Situation = BodyGlobal
  	BodyNotAllowed = Suns
	}
}

// Replace the stock scanner module with our experiment that reproduces the feature
// Do it late (zzz) in case some MM patch is relying on that module being present (ScanSat?)
@PART[*]:HAS[@MODULE[ModuleOrbitalSurveyor]]:NEEDS[KerbalismScience]:FOR[zzzKerbalism]
{
  !MODULE[ModuleOrbitalSurveyor] {}

  MODULE
  {
    name = ModuleKsmExperiment
    id = kerbalism_ResourceScanner
    allow_shrouded = False
    use_animation_group = True
  }
}
