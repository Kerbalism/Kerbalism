
// ============================================================================
// Add configurable Life Support System to all manned parts
// ============================================================================

@PART[*]:HAS[#CrewCapacity[>0],!MODULE[KerbalSeat]]:NEEDS[ProfileDefault]:FOR[KerbalismDefault]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = #KERBALISM_Scrubber_title//Scrubber
    capacity = #$/CrewCapacity$
    running = false
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  MODULE
  {
    name = ProcessController
    resource = _PressureControl
    title = #KERBALISM_PressureControl_title//Pressure control
    capacity = #$/CrewCapacity$
    running = false
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  MODULE
  {
    name = ProcessController
    resource = _WaterRecycler
    title = #KERBALISM_WaterRecycler_title//Water recycler
    capacity = #$/CrewCapacity$
    running = false
    valve_i = 6 // workaround until we have a better way to deal with dump valves
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  MODULE
  {
    name = ProcessController
    resource = _WasteProcessor
    title = #KERBALISM_WasteProcessor_title//Waste processor
    capacity = #$/CrewCapacity$
    running = false
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  MODULE
  {
    name = ProcessController
    resource = _MonopropFuelCell
    title = #KERBALISM_MonopropO2FuelCell_title//Monoprop+O2 fuel cell
    capacity = #$/CrewCapacity$
    running = false
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
}


// ============================================================================
// Add configurable Life Support System to Life Support Unit part
// the part is phasing out after Kerbalism 3.7
// ============================================================================
@PART[kerbalism-lifesupportmodule]:NEEDS[ProfileDefault]:FOR[KerbalismDefault]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = #KERBALISM_Scrubber_title//Scrubber
    capacity = 3
    running = true
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  MODULE
  {
    name = ProcessController
    resource = _PressureControl
    title = #KERBALISM_PressureControl_title//Pressure control
    capacity = 3
    running = true
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  MODULE
  {
    name = ProcessController
    resource = _WaterRecycler
    title = #KERBALISM_WaterRecycler_title//Water recycler
    capacity = 3
    running = true
    valve_i = 6 // workaround until we have a better way to deal with dump valves
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  MODULE
  {
    name = ProcessController
    resource = _WasteProcessor
    title = #KERBALISM_WasteProcessor_title//Waste processor
    capacity = 3
    running = true
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  MODULE
  {
    name = ProcessController
    resource = _MonopropFuelCell
    title = #KERBALISM_MonopropO2FuelCell_title//Monoprop+O2 fuel cell
    capacity = 3
    running = true
    disableInEditor = true // deprecated config. disable in editor (will be replaced by new habitat config)
  }

  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
}
