// =============================================================================
// Remove stock science data containers, add hard-drives/sample containers
// instead. Drive sizes will be auto-assigned at runtime if not configured here
// modded parts will need separate tweaks in their own configs
// =============================================================================
@PART[*]:HAS[@MODULE[ModuleScienceContainer]]:NEEDS[KerbalismScience]
{
	!MODULE[ModuleScienceContainer] {}
}

@PART[*]:HAS[@MODULE[ModuleCommand]]:NEEDS[KerbalismScience]
{
	MODULE
	{
		name = ModuleKsmDrive // auto-assign capacity
		title = Probe Core Storage
    sampleCapacity = 0
	}
}

// =============================================================================
// Add the ability to store samples to command pods
// =============================================================================
@PART[*]:HAS[@MODULE[ModuleCommand],#CrewCapacity[>0]]:NEEDS[KerbalismFailures]:FOR[Kerbalism]
{
	@MODULE[ModuleKsmDrive]
	{
    @title = Command Module Storage
		@sampleCapacity = -2 // -2 = auto-assign capacity
	}
}

// =============================================================================
// Adding ModuleKsmDrive module to non-command pods
// =============================================================================
@PART[*]:HAS[@MODULE[ModuleScienceLab],@MODULE[Laboratory]]:NEEDS[KerbalismScience]
{
	MODULE
	{
		name = ModuleKsmDrive
    title = Laboratory Storage
	}
}

@PART[ScienceBox]:NEEDS[KerbalismScience]
{
	MODULE
	{
		name = ModuleKsmDrive
    title = Sample Storage
    dataCapacity = 0
    sampleCapacity = 6
	}
}

@PART[kerbalEVA*]:HAS[@MODULE[ModuleTripLogger]]:NEEDS[KerbalismScience]
{
	MODULE
	{
		name = ModuleKsmDrive
    title = EVA Storage
    dataCapacity = -1
    sampleCapacity = -1
	}
}

// =============================================================================
// Internal (Private) Drives
// =============================================================================
// Goo
@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#id[mysteryGoo]],!MODULE[Laboratory]]:NEEDS[KerbalismScience]:FOR[zzzKerbalism]
{
	MODULE
	{
		name = ModuleKsmDrive
		experiment_id = mysteryGoo
		dataCapacity = 0
		sampleCapacity = 1
	}
}

// Materials Bay
@PART[*]:HAS[@MODULE[ModuleKsmExperiment]:HAS[#id[mobileMaterialsLab]],!MODULE[Laboratory]]:NEEDS[KerbalismScience]:FOR[zzzKerbalism]
{
	MODULE
	{
		name = ModuleKsmDrive
		experiment_id = mobileMaterialsLab
		dataCapacity = 0
		sampleCapacity = 4
	}
}
