// remove ridiculously OP transmitters
@PART[dm*]:NEEDS[FeatureScience,DMagicOrbitalScience]:AFTER[DMagicOrbitalScience] {
  -MODULE[ModuleDataTransmitter] {}
}

// tweak DMagic Orbital Science experiments data size
@EXPERIMENT_DEFINITION:HAS[#id[magScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]           { @dataScale = 30  }
@EXPERIMENT_DEFINITION:HAS[#id[rpwsScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]          { @dataScale = 33  }
@EXPERIMENT_DEFINITION:HAS[#id[scopeScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]         { @dataScale = 90  }
@EXPERIMENT_DEFINITION:HAS[#id[dmImagingPlatform]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism] { @dataScale = 135 }
@EXPERIMENT_DEFINITION:HAS[#id[dmSIGINT]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]          { @dataScale = 50  }
@EXPERIMENT_DEFINITION:HAS[#id[dmReconScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]       { @dataScale = 38  }
@EXPERIMENT_DEFINITION:HAS[#id[dmNAlbedoScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]     { @dataScale = 55  }
@EXPERIMENT_DEFINITION:HAS[#id[dmXRayDiffract]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]    { @dataScale = 45  }
@EXPERIMENT_DEFINITION:HAS[#id[dmlaserblastscan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]  { @dataScale = 81  }
@EXPERIMENT_DEFINITION:HAS[#id[dmSolarParticles]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]  { @dataScale = 32  }
@EXPERIMENT_DEFINITION:HAS[#id[dmSoilMoisture]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]    { @dataScale = 28  }
@EXPERIMENT_DEFINITION:HAS[#id[dmAsteroidScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]    { @dataScale = 75  }
@EXPERIMENT_DEFINITION:HAS[#id[dmRadiometerScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]  { @dataScale = 49  }
@EXPERIMENT_DEFINITION:HAS[#id[dmseismicHammer]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]   { @dataScale = 29  }
@EXPERIMENT_DEFINITION:HAS[#id[dmbathymetryscan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]  { @dataScale = 18  }
@EXPERIMENT_DEFINITION:HAS[#id[dmbiodrillscan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]    { @dataScale = 88  }
@EXPERIMENT_DEFINITION:HAS[#id[AnomalyScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]       { @dataScale = 42  }

// tweak DMagic Orbital Science experiments xmitDataScalar
@EXPERIMENT_DEFINITION:HAS[#id[magScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]           { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[rpwsScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]          { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[scopeScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]         { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmImagingPlatform]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism] { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmSIGINT]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]          { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmReconScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]       { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmNAlbedoScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]     { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmXRayDiffract]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]    { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmlaserblastscan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]  { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmSolarParticles]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]  { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmSoilMoisture]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]    { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmAsteroidScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]    { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmRadiometerScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]  { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmseismicHammer]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]   { @xmitDataScalar = 1  }
@EXPERIMENT_DEFINITION:HAS[#id[dmbathymetryscan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]  { @xmitDataScalar = 0  }
@EXPERIMENT_DEFINITION:HAS[#id[dmbiodrillscan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]    { @xmitDataScalar = 0  }
@EXPERIMENT_DEFINITION:HAS[#id[AnomalyScan]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[Kerbalism]       { @xmitDataScalar = 1  }

// tweak DMContracts xmitDataScalar
@DMContracts:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[magScan]]           { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[rpwsScan]]          { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[scopeScan]]         { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmImagingPlatform]] { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmSIGINT]]          { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmReconScan]]       { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmNAlbedoScan]]     { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmXRayDiffract]]    { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmlaserblastscan]]  { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmSolarParticles]]  { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmSoilMoisture]]    { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmAsteroidScan]]    { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmRadiometerScan]]  { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmseismicHammer]]   { @xmitDataScalar = 1  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmbathymetryscan]]  { @xmitDataScalar = 0  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[dmbiodrillscan]]    { @xmitDataScalar = 0  }
	@DM_CONTRACT_EXPERIMENT:HAS[#experimentID[AnomalyScan]]       { @xmitDataScalar = 1  }
}

// Experiments data is either transmissible completely or not at all
@PART[*]:HAS[@MODULE[*ModuleScience*]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[*ModuleScience*]:HAS[#experimentID[magScan]]             { @xmitDataScalar = 1 }
	@MODULE[*ModuleScience*]:HAS[#experimentID[rpwsScan]]            { @xmitDataScalar = 1 }
	@MODULE[*ModuleScience*]:HAS[#experimentID[scopeScan]]           { @xmitDataScalar = 1 }
	@MODULE[*ModuleScience*]:HAS[#experimentID[dmImagingPlatform]]   { @xmitDataScalar = 1 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[dmSIGINT]]            { @xmitDataScalar = 1 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[dmReconScan]]         { @xmitDataScalar = 1 }
	@MODULE[*ModuleScience*]:HAS[#experimentID[dmNAlbedoScan]]       { @xmitDataScalar = 1 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[dmXRayDiffract]]      { @xmitDataScalar = 1 }
	@MODULE[*ModuleScience*]:HAS[#experimentID[dmlaserblastscan]]    { @xmitDataScalar = 0 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[dmSolarParticles]]    { @xmitDataScalar = 1 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[dmSoilMoisture]]      { @xmitDataScalar = 1 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[dmAsteroidScan]]      { @xmitDataScalar = 1 }
	@MODULE[*ModuleScience*]:HAS[#experimentID[dmRadiometerScan]]    { @xmitDataScalar = 1 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[dmseismicHammer]]     { @xmitDataScalar = 1 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[dmbathymetryscan]]    { @xmitDataScalar = 0 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[dmbiodrillscan]]      { @xmitDataScalar = 0 }
	// @MODULE[*ModuleScience*]:HAS[#experimentID[AnomalyScan]]         { @xmitDataScalar = 1 }
}

// @PART[*]:HAS[@MODULE[DMModuleScienceAnimateGeneric]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
// {
	// @MODULE[DMModuleScienceAnimateGeneric]:HAS[#experimentID[magScan]]    { @xmitDataScalar = 1 }
// }

// @PART[*]:HAS[@MODULE[DMModuleScienceAnimate]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
// {
	// @MODULE[DMModuleScienceAnimate]:HAS[#experimentID[rpwsScan]]          { @xmitDataScalar = 1 }
	// @MODULE[DMModuleScienceAnimate]:HAS[#experimentID[scopeScan]]         { @xmitDataScalar = 1 }
	// @MODULE[DMModuleScienceAnimate]:HAS[#experimentID[dmImagingPlatform]] { @xmitDataScalar = 1 }
	// @MODULE[DMModuleScienceAnimate]:HAS[#experimentID[dmNAlbedoScan]]     { @xmitDataScalar = 1 }
	// @MODULE[DMModuleScienceAnimate]:HAS[#experimentID[dmlaserblastscan]]  { @xmitDataScalar = 1 }
	// @MODULE[DMModuleScienceAnimate]:HAS[#experimentID[dmRadiometerScan]]  { @xmitDataScalar = 1 }
// }

@PART[*]:HAS[@MODULE[DMSIGINT]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMSIGINT]:HAS[#experimentID[dmSIGINT]]                        { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMReconScope]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMReconScope]:HAS[#experimentID[dmReconScan]]                 { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMXRayDiffract]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMXRayDiffract]:HAS[#experimentID[dmXRayDiffract]]            { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMSolarCollector]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMSolarCollector]:HAS[#experimentID[dmSolarParticles]]        { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMSoilMoisture]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMSoilMoisture]:HAS[#experimentID[dmSoilMoisture]]            { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMAsteroidScanner]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMAsteroidScanner]:HAS[#experimentID[dmAsteroidScan]]         { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMSeismicSensor]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMSeismicSensor]:HAS[#experimentID[dmseismicHammer]]          { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMBathymetry]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMBathymetry]:HAS[#experimentID[dmbathymetryscan]]            { @xmitDataScalar = 0 }
}

@PART[*]:HAS[@MODULE[DMBioDrill]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMBioDrill]:HAS[#experimentID[dmbiodrillscan]]                { @xmitDataScalar = 0 }
}

@PART[*]:HAS[@MODULE[DMAnomalyScanner]]:NEEDS[DMagicOrbitalScience,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMAnomalyScanner]:HAS[#experimentID[AnomalyScan]]             { @xmitDataScalar = 1 }
}

// DMagic Orbital Science parts of Universal Storage 2
@PART[*]:HAS[@MODULE[DMUniversalStorageScience]]:NEEDS[DMagicOrbitalScience,UniversalStorage2,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMUniversalStorageScience]:HAS[#experimentID[magScan]]           { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMUniversalStorageScience]]:NEEDS[DMagicOrbitalScience,UniversalStorage2,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMUniversalStorageScience]:HAS[#experimentID[magScan]]           { @xmitDataScalar = 1 }
	@MODULE[DMUniversalStorageScience]:HAS[#experimentID[rpwsScan]]          { @xmitDataScalar = 1 }
	@MODULE[DMUniversalStorageScience]:HAS[#experimentID[scopeScan]]         { @xmitDataScalar = 1 }
	@MODULE[DMUniversalStorageScience]:HAS[#experimentID[dmImagingPlatform]] { @xmitDataScalar = 1 }
	@MODULE[DMUniversalStorageScience]:HAS[#experimentID[dmRadiometerScan]]  { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMUniversalStorageSolarCollector]]:NEEDS[DMagicOrbitalScience,UniversalStorage2,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMUniversalStorageSolarCollector]:HAS[#experimentID[dmSolarParticles]] { @xmitDataScalar = 1 }
}

@PART[*]:HAS[@MODULE[DMUniversalStorageSoilMoisture]]:NEEDS[DMagicOrbitalScience,UniversalStorage2,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMUniversalStorageSoilMoisture]:HAS[#experimentID[dmSoilMoisture]]     { @xmitDataScalar = 1 }
}

// old Universal Storage
@PART[*]:HAS[@MODULE[DMSolarCollector]]:NEEDS[DMagicOrbitalScience,UniversalStorage,FeatureScience]:FOR[zzzKerbalism]
{
	@MODULE[DMSolarCollector]        { @xmitDataScalar = 1 }
}
