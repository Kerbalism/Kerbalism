// Habitat surface/volume
// by schrema

@PART[inlineCmdPod]:NEEDS[NearFutureSpacecraft,FeatureHabitat]:AFTER[Kerbalism]
{
  @MODULE[Habitat]
  {
    %volume = 14.11
    %surface = 18.42
  }
}
@PART[mk4-1pod]:NEEDS[NearFutureSpacecraft,FeatureHabitat]:AFTER[Kerbalism]
{
  @MODULE[Habitat]
  {
    %volume = 17.89
    %surface = 28.2
  }
}
@PART[mk3-9pod]:NEEDS[NearFutureSpacecraft,FeatureHabitat]:AFTER[Kerbalism]
{
  @MODULE[Habitat]
  {
    %volume = 4.8
    %surface = 10.93
  }
}
@PART[utilityCabin]:NEEDS[NearFutureSpacecraft,FeatureHabitat]:AFTER[Kerbalism]
{
  @MODULE[Habitat]
  {
    %volume = 8.59
    %surface = 13.74
  }
}

// For now the solar panel is not embedded in command probes or habitats
// ModuleCurvedSolarPanel is defined by NearFutureSolar, it is not a stock module
@PART[*]:HAS[@MODULE[ModuleCurvedSolarPanel],!MODULE[ModuleCommand]]:NEEDS[NearFutureSolar,FeatureReliability]:AFTER[Kerbalism]
{
	MODULE
	{
		name = Reliability
		type = ModuleCurvedSolarPanel
		title = Solar Panel
		redundancy = Power Generation
		repair = true
		mtbf = 36288000
		extra_cost = 2.5
		extra_mass = 1.0
	}
}

@PART[rtg-0625]:NEEDS[NearFutureElectrical]
{
  MODULE:NEEDS[FeatureRadiation]
  {
    name = Emitter
    radiation = 0.000002222 // 0.008 rad/h
  }

  MODULE:NEEDS[ProfileDefault|ProfileClassic]
  {
    name = ProcessController
    resource = _RTG
    title = RTG
    capacity = 3.0
    running = true
    toggle = false
  }

  !MODULE[ModuleGenerator]:NEEDS[ProfileDefault|ProfileClassic] {}
}

@PART[reactor-0625]:NEEDS[NearFutureElectrical]
{
    // Radiation workers are allowed to be exposed to 5000 mrem of radiation on yearly basis, but recommended to stay within 1000 mrem/year over whole lifetime
    // Radiation workers are likely to receive 100 mrem/year, so let's use that value for a single reactor
    // See http://news.mit.edu/1994/safe-0105 and http://neinuclearnotes.blogspot.com/2008/08/nuclear-plant-workers-averaged-lowest.html
    // Note: 1000 mrem is 1 rad
    // Note: Assume that shielding improves for larger reactors, and thus radiation is constant for all reactor types
    MODULE:NEEDS[FeatureRadiation]
    {
        name = Emitter
        radiation = 0.000003 // rad/s
    }

    MODULE
    {
        name = ProcessController
        resource = _EnrichedUraniumFissionReactor
        title = Fission Reactor
        capacity = 60.0
        redundancy = Power Generation
        mtbf = 36288000
        extra_cost = 2.5
        extra_mass = 1.0
    }

    !MODULE[FissionGenerator] {}
    !MODULE[FissionReactor] {}
    !MODULE[ModuleCoreHeatNoCatchup] {}
}

@PART[reactor-125]:NEEDS[NearFutureElectrical]
{
    MODULE:NEEDS[FeatureRadiation]
    {
        name = Emitter
        radiation = 0.000003 // rad/s
    }

    MODULE
    {
        name = ProcessController
        resource = _EnrichedUraniumFissionReactor
        title = Fission Reactor
        capacity = 400.0
        redundancy = Power Generation
        mtbf = 36288000
        extra_cost = 2.5
        extra_mass = 1.0
    }

    !MODULE[FissionGenerator] {}
    !MODULE[FissionReactor] {}
    !MODULE[ModuleCoreHeatNoCatchup] {}
}

@PART[reactor-25]:NEEDS[NearFutureElectrical]
{
    MODULE:NEEDS[FeatureRadiation]
    {
        name = Emitter
        radiation = 0.000003 // rad/s
    }

    MODULE
    {
        name = ProcessController
        resource = _EnrichedUraniumFissionReactor
        title = Fission Reactor
        capacity = 2000.0
        redundancy = Power Generation
        mtbf = 36288000
        extra_cost = 2.5
        extra_mass = 1.0
    }

    !MODULE[FissionGenerator] {}
    !MODULE[FissionReactor] {}
    !MODULE[ModuleCoreHeatNoCatchup] {}
}

@PART[reactor-25-2]:NEEDS[NearFutureElectrical]
{
    MODULE:NEEDS[FeatureRadiation]
    {
        name = Emitter
        radiation = 0.000003 // rad/s
    }

    MODULE
    {
        name = ProcessController
        resource = _EnrichedUraniumFissionReactor
        title = Fission Reactor
        capacity = 3000.0
        redundancy = Power Generation
        mtbf = 36288000
        extra_cost = 2.5
        extra_mass = 1.0
    }

    !MODULE[FissionGenerator] {}
    !MODULE[FissionReactor] {}
    !MODULE[ModuleCoreHeatNoCatchup] {}
}

@PART[reactor-375]:NEEDS[NearFutureElectrical]
{
    MODULE:NEEDS[FeatureRadiation]
    {
        name = Emitter
        radiation = 0.000003 // rad/s
    }

    MODULE
    {
        name = ProcessController
        resource = _EnrichedUraniumFissionReactor
        title = Fission Reactor
        capacity = 2000.0
        redundancy = Power Generation
        mtbf = 36288000
        extra_cost = 2.5
        extra_mass = 1.0
    }

    !MODULE[FissionGenerator] {}
    !MODULE[FissionReactor] {}
    !MODULE[ModuleCoreHeatNoCatchup] {}
}

@PART[reactor-375-2]:NEEDS[NearFutureElectrical]
{
    MODULE:NEEDS[FeatureRadiation]
    {
        name = Emitter
        radiation = 0.000003 // rad/s
    }

    MODULE
    {
        name = ProcessController
        resource = _EnrichedUraniumFissionReactor
        title = Fission Reactor
        capacity = 6000.0
        redundancy = Power Generation
        mtbf = 36288000
        extra_cost = 2.5
        extra_mass = 1.0
    }

    !MODULE[FissionGenerator] {}
    !MODULE[FissionReactor] {}
    !MODULE[ModuleCoreHeatNoCatchup] {}
}

